# HTTP сервис, который рассчитывает стоимость ВМ 
  Программа на Ruby реализующая HTTP сервер, который принимает запрос с конфигурацией ВМ вметсе с конфигурациями дополнительных дисков(опционально) и возвращает стоимость ВМ в рублях в формате JSON.  
  Пример валидного запроса:

    http://localhost:3001/?cpu=100,ram=100,hdd_type=sata,hdd_capacity=5,disks[]=sata&disks[]=32&disks[]=ssd&disks[]=32

## Общий принцип работы
  Для запуска программы требуется запустить файл main.rb. В этом файле подключаются все файлы с классами, создается объект класса Server и сервер запускается. Полученный запрос сервер передает в объект класса ResponseController. Результат работы объекта класса ResponseController подставляется в шаблон ответа и отправляется клиенту.

### Классы:

#### Server ( аргументом принимает порт который нужно прослушивать. По умолчанию порт 3001 )  
  Организует работу приложения как сервера, то есть слушает определенный порт и ждет запроса. Полученный запрос отдает на обработку классу ResponseController и результат его работы подставляет в шаблон JSON ответа.
  Отправляет клиенту ответ.
##### Методы:
###### raise_session
  'Поднимает сессию', то есть начинает работу сервера. Внутри этого метода происходит работа всего сервера.

### ResponseController ( аргументом принимает запрос от клиента )
  Управляет обработкой запроса и формированием ответа.
  Определяет цену из .csv файла при помощи класса CsvReader. (price)
  Получает конфигурации ВМ при помощи класса RequestReader. (vm_conf)
  Создает объект ВМ при помощи класса VM на основании полученных ранее концигураций. (vm)
  Получает стоимость ВМ при помощи класса CostManager. (vm_cost)
##### Методы:
###### result
  Вся логика класса происходит в этом методе. Возвращает значение типа Integer.

### CsvReader ( аргументом принимает название .csv файла лежащего в дирректории csv_db)
  Читает файл формата CSV и возвращает хэш со списком цен в котором все строки с числовым значением заменены на значения типа Integer.
##### Методы:
###### read_vm_prices
  Возвращает хэш со списком цен. Выполняет задачу класса.

##### Private методы:
###### reveal_integers
  Выявляет числа и приводит их к типу Integer

### RequestReader ( аргументом принимает запрос от клиента )
  Читает запрос от клиента и возвращает конфигурации ВМ в виде хэша.
####  Вид возвращаемого хэша:
     {
       cpu: integer,
       ram: integer,
       hdd_type: string,
       hdd_capacity: integer,
       addit_hdd: array
     }
##### Методы:
###### result
  Выполняет задачу класса. Возвращает стоимость ВМ.
###### addit_hdd
  Ищет в запросе конфигурации дополнительных дисков и составляет из них массив хэшей

### VM
####     аргументом принимает хэш конфигураций:
     {
       cpu: integer,
       ram: integer,
       hdd_type: string,
       hdd_capacity: integer,
       addit_hdd: array
     }
  Создает объект вычислительная машина на основе прнимаемых конфигураций. Каждый параметр хранится в соответствующей переменной объекта. Имеет пустую переменную объекта cost. Её заполняет класс CostManager.

### CostManager
  Находит цены для каждого компонента, просчитывает стоимость дополнительных дисков и полную стоимость ВМ.

##### Методы:
###### calc_cost( аргументом принимает ВМ. По умолчанию равен @vm)
  Высчитывает стоимость ВМ. Возвращает значение типа Integer. Принимает аргументом объект класса VM. По умолчанию берет в качестве аргумента инстансную переменную @vm.
###### clac_add_hdd ( аргументом принимает ВМ )
  Высчитывает стоимость всех дополнительных дисков ВМ. Возращает сумму.
